$color-theme = $light-color-theme  //compat

set_text_light()
  --text-p0: $dark-title
  --text-p1: mix($dark-text, $dark-mix, 85)
  --text-p2: mix($dark-text, $dark-mix, 70)
  --text-p3: mix($dark-text, $dark-mix, 45)
  --text-p4: mix($dark-text, $dark-mix, 35)
  --text-meta: mix($dark-text, $dark-mix, 30)
  --text-code: $dark-code
  --text-revert: $light-title
set_text_dark()
  --text-p0: $light-title
  --text-p1: $light-text
  --text-p2: mix($light-text, $light-mix, 80)
  --text-p3: mix($light-text, $light-mix, 60)
  --text-p4: mix($light-text, $light-mix, 35)
  --text-meta: mix($light-text, $light-mix, 20)
  --text-code: $light-code
  --text-revert: $dark-title
:root
  --site-bg: $light-background
  --color-scheme: $light-color-scheme
  --card-border: $light-border
  --card: $light-card
  --block: $light-block
  --block-border: darken($light-block, 5)
  --block-hover: darken($light-block, 2)
  set_text_dark()
  --theme-highlight: $light-color-theme
  --theme-cap: darken($light-color-theme,10)
  --theme-bg: $light-card
  --theme-link: $light-color-theme

set_darkmode()
  :root
    --site-bg: $dark-background
    --color-scheme: $dark-color-scheme
    --card: $dark-card
    --card-border: $dark-border
    --block: $dark-block
    --block-border: lighten($dark-block, 6)
    --block-hover: darken($dark-block, 4)
    set_text_light()
    --theme-highlight: $dark-color-theme
    --theme-cap: $dark-color-theme
    --theme-bg: $dark-card
    @media screen and (max-width: $device-mobile-max)
      --site-bg: $dark-background-mobile
      --card: darken($dark-card, 6)
      --block: darken($dark-block, 4)
      --block-border: lighten($dark-block, 2)
      --block-hover: darken($dark-block,8)

if hexo-config('style.darkmode') == 'auto'
  // 系统的dark模式
  @media (prefers-color-scheme: dark)
    set_darkmode()


if hexo-config('style.darkmode') == 'always'
  set_darkmode()
